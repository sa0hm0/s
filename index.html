<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <title>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©ØŒ Ø§Ù„Ø£Ø°ÙƒØ§Ø±ØŒ ÙˆØ§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>
  <link rel="icon" href="https://media.discordapp.net/attachments/1316731095391277066/1385612672816513116/raw.png">
  <style>
    /* ========== Base & Reset ========== */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Tajawal', sans-serif;
      background: #f4f9f4; color: #0a3d24;
      line-height: 1.6; text-align: right;
      overflow-x: hidden;
    }
    a { color: inherit; text-decoration: none; }

    /* ========== Header ========== */
    header {
      position: relative;
      background: #0a3d24 url("https://media.discordapp.net/attachments/1316731095391277066/1385612664574574732/raw.png") center/cover no-repeat;
      padding: 60px 20px; color: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    #siteLogo {
      position: absolute; top: 20px; left: 20px;
      width: 60px; height: auto;
    }
    header h1 {
      font-size: 1.8rem;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
    }
    #menuBtn {
      position: absolute; top: 20px; right: 20px;
      font-size: 1.8rem; background: none; border: none; color: #fff;
      cursor: pointer;
    }

    /* ========== Side Menu ========== */
    #sideMenu {
      position: fixed; top: 0; right: -260px;
      width: 240px; height: 100vh;
      background: #033e1b; padding-top: 60px;
      transition: right .3s; z-index: 1000;
    }
    #sideMenu a {
      display: block; padding: 12px 20px;
      color: #fff; border-bottom: 1px solid #045d38;
      font-size: 1rem;
    }
    #sideMenu a:hover { background: #045d38; }

    /* ========== Boxes ========== */
    .box {
      display: none;
      max-width: 900px; margin: 20px auto;
      background: #fff; border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 20px;
    }
    .box h2 {
      display: inline-block;
      padding-bottom: 5px; margin-bottom: 15px;
      border-bottom: 2px solid #0a3d24;
      font-size: 1.3rem;
    }

    /* ========== Controls ========== */
    .controls {
      display: flex; flex-wrap: wrap;
      justify-content: center; gap: 10px;
      margin-bottom: 15px;
    }
    .controls select,
    .controls input,
    .controls button {
      padding: 8px; font-size: .95rem;
      border: 1px solid #0a3d24; border-radius: 4px;
    }
    .controls button {
      background: #0a3d24; color: #fff; cursor: pointer;
    }
    .controls button:hover { background: #08301c; }

    /* ========== Prayer Times ========== */
    .times {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px,1fr));
      gap: 12px; margin-top: 12px;
    }
    .times div {
      display: flex; justify-content: space-between;
      font-size: .95rem;
    }
    #nextCountdown {
      margin-top: 12px; font-weight: bold; color: #d35400;
    }

    /* ========== Dhikr Menu ========== */
    #adhkarMenu {
      display: flex; flex-wrap: wrap;
      gap: 8px; margin-bottom: 12px;
      justify-content: center;
    }
    #adhkarMenu button {
      padding: 6px 10px;
      border: 1px solid #0a3d24; border-radius: 4px;
      background: #fff; cursor: pointer;
    }
    #adhkarMenu button.active {
      background: #0a3d24; color: #fff;
    }
    #adhkarList {
      list-style: disc inside; font-size: .95rem;
      margin-top: 10px;
    }

    /* ========== Dua Section ========== */
    #duasSelect, #showDuaBtn {
      margin: 8px; padding: 6px 12px;
      font-size: .95rem;
    }

    /* ========== Qibla ========== */
    #compass {
      width: 150px; height: 150px; margin: 15px auto;
      background: url('https://cdn-icons-png.flaticon.com/512/54/54417.png') center/contain no-repeat;
      transform-origin: center; display: none;
    }
    #mobileOnly {
      display: none; color: #d35400;
      margin-top: 8px; font-size: .9rem;
    }

    /* ========== Countdown Cards ========== */
    #countdowns .card {
      background: #fff; border: 1px solid #ddd;
      border-radius: 8px; padding: 15px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      margin: 10px auto; max-width: 400px;
    }
    #countdowns .card h3 {
      font-size: 1rem; color: #045d38; margin-bottom: 6px;
    }
    #countdowns .card p { font-size: .95rem; }

    /* ========== Quran Reader ========== */
    #searchContainer {
      margin-bottom: 12px;
    }
    #searchContainer input {
      padding: 6px 10px; width: 60%;
      font-size: .95rem; border: 1px solid #0a3d24; border-radius: 4px;
    }
    #searchContainer button {
      padding: 6px 12px; margin-left: 6px;
      background: #0a3d24; color: #fff; border: none; cursor: pointer; border-radius: 4px;
    }
    #readerControls {
      display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;
      margin-bottom: 12px;
    }
    #readerControls select {
      padding: 6px; font-size: .95rem; border: 1px solid #0a3d24; border-radius: 4px;
    }
    #khatmNav {
      display: flex; flex-wrap: wrap;
      gap: 6px; overflow-x: auto; margin-bottom: 12px;
      justify-content: center;
    }
    #khatmNav button {
      padding: 6px 10px; border: 1px solid #0a3d24;
      background: #fff; border-radius: 4px; cursor: pointer;
    }
    #khatmNav button.active {
      background: #0a3d24; color: #fff;
    }
    #quranView {
      height: 500px; overflow-y: auto;
      border: 1px solid #ccc; border-radius: 4px;
      padding: 12px; text-align: right; line-height: 1.6;
      background: #fafafa;
    }

    /* ========== Audio Icon ========= */
    .audio-btn {
      display: inline-block; margin-left: 6px;
      cursor: pointer; font-size: 1.2rem; color: #0a3d24;
    }

    /* ========== Khatm Table ========= */
    #khatmTable {
      width: 100%; border-collapse: collapse; margin-top: 12px;
    }
    #khatmTable th, #khatmTable td {
      border: 1px solid #ccc; padding: 6px; text-align: center;
    }
    #khatmTable th {
      background: #045d38; color: #fff;
    }

    /* ========== Responsive ========== */
    @media(max-width:600px) {
      .times { grid-template-columns: 1fr; }
      #searchContainer input { width: 100%; margin-bottom: 8px; }
      #sideMenu { width: 70%; }
    }
  </style>
</head>
<body>

  <!-- ===== Header ===== -->
  <header>
    <img id="siteLogo" src="https://media.discordapp.net/attachments/1316731095391277066/1385612672816513116/raw.png" alt="Ù„ÙˆØ¬Ùˆ">
    <h1>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© ÙˆØ§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
    <button id="menuBtn">â˜°</button>
    <nav id="sideMenu">
      <a href="#" data-page="home">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a href="#" data-page="adhkar">Ø£Ø°ÙƒØ§Ø±</a>
      <a href="#" data-page="duas">Ø£Ø¯Ø¹ÙŠØ©</a>
      <a href="#" data-page="qibla">Ø§Ù„Ù‚Ø¨Ù„Ø©</a>
      <a href="#" data-page="countdowns">Ù…Ø¤Ø§Ù‚Øª</a>
      <a href="#" data-page="khatmTable">Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†</a>
      <a href="#" data-page="khatmReader">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</a>
      <a href="https://ehsan.sa" target="_blank">Ø¥Ø­Ø³Ø§Ù†</a>
    </nav>
  </header>

  <!-- ===== Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ===== -->
  <div id="home" class="box">
    <h2>Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
    <div class="controls">
      <select id="citySelect">
        <option value="">â€” Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© â€”</option>
        <option value="Mecca|Saudi Arabia">Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©</option>
        <option value="Medina|Saudi Arabia">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©</option>
        <option value="Cairo|Egypt">Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©</option>
        <option value="Istanbul|Turkey">Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„</option>
        <option value="London|United Kingdom">Ù„Ù†Ø¯Ù†</option>
        <option value="Dubai|United Arab Emirates">Ø¯Ø¨ÙŠ</option>
        <option value="Jakarta|Indonesia">Ø¬Ø§ÙƒØ±ØªØ§</option>
        <option value="Custom">Ù…Ø®ØµØµ...</option>
      </select>
      <input type="text" id="customCity" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©" style="display:none;">
      <input type="text" id="customCountry" placeholder="Ø§Ù„Ø¯ÙˆÙ„Ø©" style="display:none;">
      <button id="loadBtn">Ù…ÙˆØ§ÙÙ‚</button>
    </div>
    <div id="timesBox" class="box">
      <h2>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</h2>
      <div class="times">
        <div><span>Ø§Ù„ÙØ¬Ø±</span><span id="Fajr">...</span></div>
        <div><span>Ø§Ù„Ø´Ø±ÙˆÙ‚</span><span id="Sunrise">...</span></div>
        <div><span>Ø§Ù„Ø¸Ù‡Ø±</span><span id="Dhuhr">...</span></div>
        <div><span>Ø§Ù„Ø¹ØµØ±</span><span id="Asr">...</span></div>
        <div><span>Ø§Ù„Ù…ØºØ±Ø¨</span><span id="Maghrib">...</span></div>
        <div><span>Ø§Ù„Ø¹Ø´Ø§Ø¡</span><span id="Isha">...</span></div>
      </div>
      <p id="nextCountdown"></p>
    </div>
  </div>

  <!-- ===== Ø§Ù„Ø£Ø°ÙƒØ§Ø± ===== -->
  <div id="adhkar" class="box">
    <h2>Ø§Ù„Ø£Ø°ÙƒØ§Ø±</h2>
    <div id="adhkarMenu"></div>
    <ul id="adhkarList"></ul>
  </div>

  <!-- ===== Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© ===== -->
  <div id="duas" class="box">
    <h2>Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©</h2>
    <select id="duasSelect">
      <option value="">â€” Ø§Ø®ØªØ± Ø¯Ø¹Ø§Ø¡ â€”</option>
      <option value="rain">Ø¯Ø¹Ø§Ø¡ Ù†Ø²ÙˆÙ„ Ø§Ù„Ù…Ø·Ø±</option>
      <option value="fast">Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ù„Ù„ØµØ§Ø¦Ù…</option>
      <option value="travel">Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø³ÙØ±</option>
      <option value="istikharah">Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø§Ø³ØªØ®Ø§Ø±Ø©</option>
      <option value="morning">Ø¯Ø¹Ø§Ø¡ Ø§Ù„ØµØ¨Ø§Ø­</option>
      <option value="evening">Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¡</option>
    </select>
    <button id="showDuaBtn">Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø¹Ø§Ø¡</button>
    <ul id="duaText"></ul>
  </div>

  <!-- ===== Ø§Ù„Ù‚Ø¨Ù„Ø© ===== -->
  <div id="qibla" class="box">
    <h2>Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù‚Ø¨Ù„Ø©</h2>
    <div id="compass"></div>
    <p id="mobileOnly">Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù…ØªØ§Ø­Ø© ÙÙŠ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© ÙÙ‚Ø·</p>
  </div>

  <!-- ===== Ø§Ù„Ù…Ø¤Ø§Ù‚Øª ===== -->
  <div id="countdowns" class="box">
    <h2>Ø§Ù„Ù…Ø¤Ø§Ù‚Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</h2>
    <div class="card"><h3>Ø¨Ø§Ù‚ÙŠ Ø¹Ù„Ù‰ Ø±Ù…Ø¶Ø§Ù†</h3><p id="toRamadan"></p></div>
    <div class="card"><h3>Ø¨Ø§Ù‚ÙŠ Ø¹Ù„Ù‰ Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø±</h3><p id="toEidFitr"></p></div>
    <div class="card"><h3>Ø¨Ø§Ù‚ÙŠ Ø¹Ù„Ù‰ Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø¶Ø­Ù‰</h3><p id="toEidAdha"></p></div>
  </div>

  <!-- ===== Ø¬Ø¯ÙˆÙ„ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† ===== -->
  <div id="khatmTable" class="box">
    <h2>Ø¬Ø¯ÙˆÙ„ Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† Ø®Ù„Ø§Ù„ Ø´Ù‡Ø±</h2>
    <table id="khatmTableElm">
      <thead><tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>Ù…Ù† ØµÙØ­Ø© Ø¥Ù„Ù‰ ØµÙØ­Ø©</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- ===== Ù‚Ø§Ø±Ø¦ Ø§Ù„Ù‚Ø±Ø¢Ù† ===== -->
  <div id="khatmReader" class="box">
    <h2>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h2>
    <div id="searchContainer">
      <input type="text" id="suraSearch" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø³ÙˆØ±Ø© Ø¨Ø§Ù„Ø§Ø³Ù…">
      <button id="searchBtn">Ø¨Ø­Ø«</button>
    </div>
    <div id="readerControls">
      <select id="readerSelect">
        <option value="">â€” Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø§Ø±Ø¦ â€”</option>
        <option value="yaserdosari">ÙŠØ§Ø³Ø± Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ</option>
        <option value="msharielafasy">Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ</option>
        <option value="abdulbasit">Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯ Ø§Ù„ØµÙ…Ø¯</option>
        <option value="ahmadalajmi">Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¹Ø¬Ù…ÙŠ</option>
      </select>
    </div>
    <div id="khatmNav"></div>
    <div id="quranView">Ø³ÙŠØ¸Ù‡Ø± Ù†Øµ Ø§Ù„Ø³ÙˆØ±Ø© Ù‡Ù†Ø§...</div>
  </div>

  <script>
    // â€”â€”â€” Navigation â€”â€”â€”
    const menuBtn = document.getElementById('menuBtn'),
          sideMenu = document.getElementById('sideMenu'),
          links    = sideMenu.querySelectorAll('a[data-page]'),
          boxes    = document.querySelectorAll('.box');
    menuBtn.onclick = ()=> sideMenu.style.right = sideMenu.style.right==='0px' ? '-260px' : '0px';
    links.forEach(l=>{
      l.onclick = e=>{
        e.preventDefault();
        boxes.forEach(b=> b.id===l.dataset.page ? b.style.display='block' : b.style.display='none');
        sideMenu.style.right='-260px';
      };
    });
    links[0].click();

    // â€”â€”â€” Prayer Times â€”â€”â€”
    const timesEls = ['Fajr','Sunrise','Dhuhr','Asr','Maghrib','Isha']
      .reduce((o,k)=>(o[k]=document.getElementById(k),o),{});
    let currentTZ='';
    async function loadTimings(lat,lon,city,country){
      let url = lat!=null
        ? `https://api.aladhan.com/v1/timings/${Math.floor(Date.now()/1000)}?latitude=${lat}&longitude=${lon}&method=2`
        : `https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(city)}&country=${encodeURIComponent(country)}&method=2`;
      const j = await fetch(url).then(r=>r.json());
      currentTZ = j.data.meta.timezone;
      Object.entries(j.data.timings).forEach(([k,v])=>{
        let [h,m]=v.split(':').map(n=>parseInt(n));
        timesEls[k].textContent = `${h%12||12}:${String(m).padStart(2,'0')}`;
      });
      startNextFriday();
    }
    if(navigator.geolocation){
      navigator.geolocation.getCurrentPosition(p=> loadTimings(p.coords.latitude,p.coords.longitude), ()=>{});
    }
    document.getElementById('loadBtn').onclick = ()=>{
      const sel = document.getElementById('citySelect').value;
      if(sel==='Custom'){
        const city=document.getElementById('customCity').value.trim(),
              ct=document.getElementById('customCountry').value.trim();
        if(!city||!ct) return alert('Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ø¯ÙˆÙ„Ø©');
        loadTimings(null,null,city,ct);
      } else {
        const [city,ct]=sel.split('|');
        loadTimings(null,null,city,ct);
      }
    };
    document.getElementById('citySelect').onchange = ()=>{
      const isC = document.getElementById('citySelect').value==='Custom';
      document.getElementById('customCity').style.display    = isC?'inline-block':'none';
      document.getElementById('customCountry').style.display = isC?'inline-block':'none';
    };

    function startNextFriday(){
      const out = document.getElementById('nextCountdown');
      (function upd(){
        const now   = new Date().toLocaleString('en-US',{timeZone:currentTZ}),
              d     = new Date(now),
              ahead = ((5 - d.getDay())+7)%7||7,
              tgt   = new Date(d);
        tgt.setDate(d.getDate()+ahead); tgt.setHours(12,0,0,0);
        let diff=tgt-d;
        const days=Math.floor(diff/86400000); diff%=86400000;
        const hrs=Math.floor(diff/3600000); diff%=3600000;
        const mins=Math.floor(diff/60000); diff%=60000;
        const secs=Math.floor(diff/1000);
        out.textContent=`Ø¨Ø§Ù‚ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù…Ø¹Ø©: ${days>0?days+'ÙŠ ':''}${hrs}Ø³ ${mins}Ø¯ ${secs}Ø«`;
        setTimeout(upd,1000);
      })();
    }

    // â€”â€”â€” Dhikr Menu â€”â€”â€”
    const adhkarData = {
      'Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­': ['Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ£ØµØ¨Ø­ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡','Ø±Ø¶ÙŠØª Ø¨Ø§Ù„Ù„Ù‡ Ø±Ø¨Ø§','Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£ØµØ¨Ø­Ù†Ø§'],
      'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡': ['Ø£Ù…Ø³ÙŠÙ†Ø§ ÙˆØ£Ù…Ø³Ù‰ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡','Ø±Ø¶ÙŠØª Ø¨Ø§Ù„Ù„Ù‡ Ø±Ø¨Ø§','Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£Ù…Ø³ÛŒÙ†Ø§'],
      'Ø£Ø°ÙƒØ§Ø± Ø¹Ø§Ù…Ø©': ['Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡','Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡','Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡','Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±']
    };
    const adhkarMenu = document.getElementById('adhkarMenu'),
          adhkarList = document.getElementById('adhkarList');
    Object.keys(adhkarData).forEach(section=>{
      const btn = document.createElement('button');
      btn.textContent=section;
      btn.onclick=()=>{
        adhkarMenu.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        adhkarList.innerHTML='';
        adhkarData[section].forEach(txt=>{
          const li=document.createElement('li');
          li.textContent=txt; adhkarList.append(li);
        });
      };
      adhkarMenu.append(btn);
    });
    adhkarMenu.firstChild.click();

    // â€”â€”â€” Duas â€”â€”â€”
    const duaList = {
      rain:['Ø§Ù„Ù„Ù‡Ù… ØµÙŠØ¨Ù‹Ø§ Ù†Ø§ÙØ¹Ù‹Ø§','Ø§Ù„Ù„Ù‡Ù… Ø§Ø³Ù‚Ù†Ø§ Ø§Ù„ØºÙŠØ« ÙˆÙ„Ø§ ØªØ¬Ø¹Ù„Ù†Ø§ Ù…Ù† Ø§Ù„Ù‚Ø§Ù†Ø·ÙŠÙ†'],
      fast:['Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ù„Ùƒ ØµÙ…Øª ÙˆØ¨Ùƒ Ø¢Ù…Ù†Øª ÙˆØ¹Ù„ÙŠÙƒ ØªÙˆÙƒÙ„Øª ÙˆØ¹Ù„Ù‰ Ø±Ø²Ù‚Ùƒ Ø£ÙØ·Ø±Øª'],
      travel:['Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ø°ÙŠ Ø³Ø®Ø± Ù„Ù†Ø§ Ù‡Ø°Ø§ ÙˆÙ…Ø§ ÙƒÙ†Ø§ Ù„Ù‡ Ù…Ù‚Ø±Ù†ÙŠÙ† ÙˆØ¥Ù†Ø§ Ø¥Ù„Ù‰ Ø±Ø¨Ù†Ø§ Ù„Ù…Ù†Ù‚Ù„Ø¨ÙˆÙ†'],
      istikharah:['Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³ØªØ®ÙŠØ±Ùƒ Ø¨Ø¹Ù„Ù…Ùƒ ÙˆØ§Ø³ØªÙ‚Ø¯Ø±Ùƒ Ø¨Ù‚Ø¯Ø±ØªÙƒ ÙˆØ§Ø³Ø£Ù„Ùƒ Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ù„Ø¹Ø¸ÙŠÙ…'],
      morning:['Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ¨Ùƒ Ø£Ù…Ø³ÛŒÙ†Ø§ ÙˆØ¨Ùƒ Ù†Ø­ÙŠØ§ ÙˆØ¨Ùƒ Ù†Ù…ÙˆØª ÙˆØ¥Ù„ÙŠÙƒ Ø§Ù„Ù…ØµÙŠØ±'],
      evening:['Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£Ù…Ø³ÛŒÙ†Ø§ ÙˆØ¨Ùƒ Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ¨Ùƒ Ù†Ø­ÛŒØ§ ÙˆØ¨Ùƒ Ù†Ù…ÙˆØª ÙˆØ¥Ù„ÛŒÚ© Ø§Ù„Ù…ØµÛŒØ±']
    };
    document.getElementById('showDuaBtn').onclick=()=>{
      const sel=document.getElementById('duasSelect').value,
            out=document.getElementById('duaText');
      out.innerHTML=''; (duaList[sel]||[]).forEach(txt=>{
        const li=document.createElement('li');
        li.textContent=txt; out.append(li);
      });
    };

    // â€”â€”â€” Qibla â€”â€”â€”
    if('DeviceOrientationEvent' in window){
      document.getElementById('compass').style.display='block';
      window.addEventListener('deviceorientation',e=>{
        document.getElementById('compass').style.transform=`rotate(${-e.alpha}deg)`;
      });
    } else document.getElementById('mobileOnly').style.display='block';

    // â€”â€”â€” Countdown Cards â€”â€”â€”
    const toRamadan=document.getElementById('toRamadan'),
          toEidFitr=document.getElementById('toEidFitr'),
          toEidAdha=document.getElementById('toEidAdha');
    const dates = {
      ramadan: new Date('2026-02-10T00:00:00'),
      eidFitr: new Date('2026-03-11T00:00:00'),
      eidAdha: new Date('2026-06-16T00:00:00')
    };
    function updateCounts(){
      const now=new Date();
      [['ramadan',toRamadan],['eidFitr',toEidFitr],['eidAdha',toEidAdha]]
      .forEach(([k,el])=>{
        let diff=dates[k]-now;
        if(diff<0) return el.textContent='Ø§Ù†ØªÙ‡Ù‰';
        const dTot=Math.floor(diff/86400000),
              M=Math.floor(dTot/30),
              D=dTot%30;
        diff%=86400000;
        const H=Math.floor(diff/3600000),
              m=Math.floor((diff%3600000)/60000),
              s=Math.floor((diff%60000)/1000);
        el.textContent=`${M}Ø´ ${D}ÙŠ ${H}Ø³ ${m}Ø¯ ${s}Ø«`;
      });
    }
    setInterval(updateCounts,1000);
    updateCounts();

    // â€”â€”â€” Khatm Table â€”â€”â€”
    const tbody = document.querySelector('#khatmTableElm tbody');
    for(let i=1;i<=30;i++){
      const tr=document.createElement('tr'),
            td1=document.createElement('td'),
            td2=document.createElement('td');
      td1.textContent=`Ø§Ù„ÙŠÙˆÙ… ${i}`;
      td2.textContent=`${(i-1)*20+1}â€“${i*20}`;
      tr.append(td1,td2); tbody.append(tr);
    }

    // â€”â€”â€” Quran Reader â€”â€”â€”
    const suraNames=[
      "Ø§Ù„ÙØ§ØªØ­Ø©","Ø§Ù„Ø¨Ù‚Ø±Ø©","Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†","Ø§Ù„Ù†Ø³Ø§Ø¡","Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©","Ø§Ù„Ø£Ù†Ø¹Ø§Ù…","Ø§Ù„Ø£Ø¹Ø±Ø§Ù","Ø§Ù„Ø£Ù†ÙØ§Ù„","Ø§Ù„ØªÙˆØ¨Ø©",
      "ÙŠÙˆÙ†Ø³","Ù‡ÙˆØ¯","ÙŠÙˆØ³Ù","Ø§Ù„Ø±Ø¹Ø¯","Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…","Ø§Ù„Ø­Ø¬Ø±","Ø§Ù„Ù†Ø­Ù„","Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡","Ø§Ù„ÙƒÙ‡Ù","Ù…Ø±ÙŠÙ…","Ø·Ù‡",
      "Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡","Ø§Ù„Ø­Ø¬","Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†","Ø§Ù„Ù†ÙˆØ±","Ø§Ù„ÙØ±Ù‚Ø§Ù†","Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡","Ø§Ù„Ù†Ù…Ù„","Ø§Ù„Ù‚ØµØµ","Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª",
      "Ø§Ù„Ø±ÙˆÙ…","Ù„Ù‚Ù…Ø§Ù†","Ø§Ù„Ø³Ø¬Ø¯Ø©","Ø§Ù„Ø£Ø­Ø²Ø§Ø¨","Ø³Ø¨Ø£","ÙØ§Ø·Ø±","ÙŠØ³","Ø§Ù„ØµØ§ÙØ§Øª","Øµ","Ø§Ù„Ø²Ù…Ø±","ØºØ§ÙØ±",
      "ÙØµÙ„Øª","Ø§Ù„Ø´ÙˆØ±Ù‰","Ø§Ù„Ø²Ø®Ø±Ù","Ø§Ù„Ø¯Ø®Ø§Ù†","Ø§Ù„Ø¬Ø§Ø«ÙŠØ©","Ø§Ù„Ø£Ø­Ù‚Ø§Ù","Ù…Ø­Ù…Ø¯","Ø§Ù„ÙØªØ­","Ø§Ù„Ø­Ø¬Ø±Ø§Øª","Ù‚",
      "Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª","Ø§Ù„Ø·ÙˆØ±","Ø§Ù„Ù†Ø¬Ù…","Ø§Ù„Ù‚Ù…Ø±","Ø§Ù„Ø±Ø­Ù…Ù†","Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©","Ø§Ù„Ø­Ø¯ÙŠØ¯","Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©","Ø§Ù„Ø­Ø´Ø±",
      "Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©","Ø§Ù„ØµÙ","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†","Ø§Ù„ØªØºØ§Ø¨Ù†","Ø§Ù„Ø·Ù„Ø§Ù‚","Ø§Ù„ØªØ­Ø±ÙŠÙ…","Ø§Ù„Ù…Ù„Ùƒ","Ø§Ù„Ù‚Ù„Ù…",
      "Ø§Ù„Ø­Ø§Ù‚Ø©","Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬","Ù†ÙˆØ­","Ø§Ù„Ø¬Ù†","Ø§Ù„Ù…Ø²Ù…Ù„","Ø§Ù„Ù…Ø¯Ø«Ø±","Ø§Ù„Ù‚ÙŠØ§Ù…Ø©","Ø§Ù„Ø¥Ù†Ø³Ø§Ù†","Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª",
      "Ø§Ù„Ù†Ø¨Ø£","Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª","Ø¹Ø¨Ø³","Ø§Ù„ØªÙƒÙˆÙŠØ±","Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±","Ø§Ù„Ù…Ø·ÙÙÙŠÙ†","Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚","Ø§Ù„Ø¨Ø±ÙˆØ¬","Ø§Ù„Ø·Ø§Ø±Ù‚",
      "Ø§Ù„Ø£Ø¹Ù„Ù‰","Ø§Ù„ØºØ§Ø´ÙŠØ©","Ø§Ù„ÙØ¬Ø±","Ø§Ù„Ø¨Ù„Ø¯","Ø§Ù„Ø´Ù…Ø³","Ø§Ù„Ù„ÙŠÙ„","Ø§Ù„Ø¶Ø­Ù‰","Ø§Ù„Ø´Ø±Ø­","Ø§Ù„ØªÙŠÙ†","Ø§Ù„Ø¹Ù„Ù‚",
      "Ø§Ù„Ù‚Ø¯Ø±","Ø§Ù„Ø¨ÙŠÙ†Ø©","Ø§Ù„Ø²Ù„Ø²Ù„Ø©","Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª","Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©","Ø§Ù„ØªÙƒØ§Ø«Ø±","Ø§Ù„Ø¹ØµØ±","Ø§Ù„Ù‡Ù…Ø²Ø©","Ø§Ù„ÙÙŠÙ„",
      "Ù‚Ø±ÙŠØ´","Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†","Ø§Ù„ÙƒÙˆØ«Ø±","Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†","Ø§Ù„Ù†ØµØ±","Ø§Ù„Ù…Ø³Ø¯","Ø§Ù„Ø¥Ø®Ù„Ø§Øµ","Ø§Ù„ÙÙ„Ù‚","Ø§Ù„Ù†Ø§Ø³"
    ];
    const khatmNav = document.getElementById('khatmNav'),
          qView    = document.getElementById('quranView'),
          readerSel= document.getElementById('readerSelect');
    // build nav
    suraNames.forEach((nm,i)=>{
      const btn=document.createElement('button');
      btn.textContent=`${i+1}. ${nm}`;
      btn.onclick=async()=>{
        khatmNav.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        // load JSON verses
        let verses=[];
        try {
          verses = await fetch(`quran/sura${i+1}.json`).then(r=>r.json()).then(j=>j.verses);
        } catch {
          qView.innerHTML='<p>Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù†Øµ Ø§Ù„Ø³ÙˆØ±Ø©.</p>'; return;
        }
        // render verses
        qView.innerHTML = verses.map(v=>`<p>${v}</p>`).join('');
        // render audio icon/buttons
        const audioBtn=document.createElement('span');
        audioBtn.className='audio-btn';
        audioBtn.textContent='ğŸ”Š';
        audioBtn.onclick=()=>{
          const reader=readerSel.value;
          if(!reader) return alert('Ø§Ø®ØªØ± Ù‚Ø§Ø±Ø¦Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹');
          const audio=new Audio(`audio/${reader}/sura${i+1}.mp3`);
          audio.play();
        };
        qView.prepend(audioBtn);
      };
      khatmNav.append(btn);
    });
    // search sura
    document.getElementById('searchBtn').onclick=()=>{
      const term=document.getElementById('suraSearch').value.trim();
      const idx=suraNames.findIndex(n=>n.includes(term));
      if(idx<0) return alert('Ù„Ù… ØªÙØ¹Ø«Ø± Ø¹Ù„Ù‰ Ø³ÙˆØ±Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù…');
      khatmNav.children[idx].click();
    };
  </script>
</body>
</html>
